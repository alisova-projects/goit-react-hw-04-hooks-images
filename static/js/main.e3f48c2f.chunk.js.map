{"version":3,"sources":["Section.js","components/Searchbar/Searchbar.js","components/ApiService/ApiService.js","components/Context/Context.js","components/ImageGallery/ImageGallery.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Loader/Loader.js","components/Modal/Modal.js","components/StartPage/StartPage.js","components/ImageFinder/ImageFinder.js","App.js","index.js"],"names":["Section","title","children","Gallery","onSubmit","useState","pictureName","setPictureName","e","preventDefault","trim","toast","error","className","type","autoComplete","autoFocus","value","onChange","currentTarget","toLowerCase","placeholder","apiService","query","currentPage","axios","get","then","response","data","hits","propTypes","PropTypes","string","isRequired","number","createContext","ImageGallery","gallery","map","image","id","webformatURL","largeImageURL","previewURL","Consumer","hadleImageClick","src","data-src","alt","data-large","onClick","ImageGalleryItem","onBtnClick","LoaderSpinner","color","height","width","timeout","modalRoot","document","querySelector","Modal","onClose","useEffect","handleKeyDown","code","window","addEventListener","removeEventListener","createPortal","target","StartPage","ImageFinder","setCurrentPage","isLoading","setIsLoading","setGallery","isModalOpen","setIsModalOpen","selectedImgURL","setSelectedImageUrl","scrollHeight","documentElement","fetchPictures","images","scrollTo","top","behavior","catch","finally","length","Loader","Provider","nodeName","fullImgLink","getAttribute","body","style","overflowY","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e3f48c2f.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction Section({ title, children }) {\n  return (\n    <>\n      {title && <h1>{title}</h1>}\n      {children}\n    </>\n  );\n}\n\nSection.propTypes = {\n  title: PropTypes.string,\n  children: PropTypes.node,\n};\n\nexport default Section;\n","// import { Component } from 'react';\nimport { useState } from 'react';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nexport default function Gallery({ onSubmit }) {\n  const [pictureName, setPictureName] = useState('');\n\n  const handleNameChange = e => {\n    setPictureName(e.currentTarget.value.toLowerCase());\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (pictureName.trim() === '') {\n      return toast.error('Введите название картинки');\n    }\n    onSubmit(pictureName);\n    setPictureName('');\n  };\n\n  return (\n    <header onSubmit={handleSubmit} className=\"Searchbar\">\n      <form className=\"SearchForm\">\n        <button type=\"submit\" className=\"SearchForm-button\">\n          <span className=\"SearchForm-button-label\">Search</span>\n        </button>\n\n        <input\n          className=\"SearchForm-input\"\n          type=\"text\"\n          autoComplete=\"off\"\n          autoFocus\n          value={pictureName}\n          onChange={handleNameChange}\n          placeholder=\"Search images and photos\"\n        />\n      </form>\n    </header>\n  );\n}\n\n// class Gallery extends Component {\n//   state = {\n//     pictureName: '',\n//   };\n\n//   handleNameChange = e => {\n//     this.setState({ pictureName: e.currentTarget.value.toLowerCase() });\n//   };\n\n//   handleSubmit = e => {\n//     e.preventDefault();\n//     if (this.state.pictureName.trim() === '') {\n//       return toast.error('Введите название картинки');\n//     }\n//     this.props.onSubmit(this.state.pictureName);\n//     this.setState({ pictureName: '' });\n//   };\n\n//   render() {\n//     return (\n//       <header onSubmit={this.handleSubmit} className=\"Searchbar\">\n//         <form className=\"SearchForm\">\n//           <button type=\"submit\" className=\"SearchForm-button\">\n//             <span className=\"SearchForm-button-label\">Search</span>\n//           </button>\n\n//           <input\n//             className=\"SearchForm-input\"\n//             type=\"text\"\n//             autoComplete=\"off\"\n//             autoFocus\n//             value={this.state.pictureName}\n//             onChange={this.handleNameChange}\n//             placeholder=\"Search images and photos\"\n//           />\n//         </form>\n//       </header>\n//     );\n//   }\n// }\n\n// export default Gallery;\n","import axios from 'axios';\nimport PropTypes from 'prop-types';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '18992222-0ffbc097a98d577b6731791a7';\n\nconst apiService = (query, currentPage) => {\n  return axios\n    .get(\n      `${BASE_URL}?q=${query}&page=${currentPage}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\n    )\n    .then(response => response.data.hits);\n};\n\napiService.propTypes = {\n  query: PropTypes.string.isRequired,\n  currentPage: PropTypes.number.isRequired,\n};\n\nexport default apiService;\n","import { createContext } from 'react';\n\nexport default createContext();\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ImageGalleryItem from '../ImageGalleryItem';\n\nexport default function ImageGallery({ gallery }) {\n  return (\n    <ul className=\"ImageGallery\">\n      {gallery.map(image => ImageGalleryItem(image))}\n    </ul>\n  );\n}\nImageGallery.propTypes = {\n  gallery: PropTypes.array.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport authContext from '../Context';\n\nexport default function ImageGalleryItem({\n  id,\n  webformatURL,\n  largeImageURL,\n  previewURL,\n}) {\n  return (\n    <li className=\"ImageGalleryItem\" key={`id-${id}`}>\n      <authContext.Consumer>\n        {hadleImageClick => (\n          <img\n            src={webformatURL}\n            data-src={previewURL}\n            alt=\"searchedPicture\"\n            data-large={largeImageURL}\n            className=\"ImageGalleryItem-image lazyload blur-up\"\n            onClick={hadleImageClick}\n          />\n        )}\n      </authContext.Consumer>\n    </li>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  id: PropTypes.number.isRequired,\n  webformatURL: PropTypes.string.isRequired,\n  largeImageURL: PropTypes.string.isRequired,\n  previewURL: PropTypes.string.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction onBtnClick({ onClick }) {\n  return (\n    <button type=\"button\" className=\"Button\" onClick={onClick}>\n      Загрузить еще\n    </button>\n  );\n}\nonBtnClick.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default onBtnClick;\n","import React from 'react';\nimport Loader from 'react-loader-spinner';\n\nfunction LoaderSpinner() {\n  return (\n    <Loader\n      className=\"Loader App-logo\"\n      type=\"ThreeDots\"\n      color=\"#11BFFF\"\n      height={300}\n      width={300}\n      timeout={3000}\n    />\n  );\n}\n\nexport default LoaderSpinner;\n","// import React, { Component } from 'react';\nimport { useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default function Modal({ onClose, children }) {\n  useEffect(() => {\n    const handleKeyDown = e => {\n      if (e.code === 'Escape') {\n        onClose();\n      }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n\n    return function reset() {\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [onClose]);\n\n  const handelBackdropClick = e => {\n    if (e.target === e.currentTarget) {\n      onClose();\n    }\n  };\n\n  return createPortal(\n    <div className=\"Modal__backdrop\" onClick={handelBackdropClick}>\n      <div className=\"Modal__content\">{children}</div>\n    </div>,\n    modalRoot,\n  );\n}\n\n// export default class Modal extends Component {\n//   componentDidMount() {\n//     window.addEventListener('keydown', this.handleKeyDown);\n//   }\n\n//   componentWillUnmount() {\n//     window.removeEventListener('keydown', this.handleKeyDown);\n//   }\n\n//   handleKeyDown = e => {\n//     if (e.code === 'Escape') {\n//       this.props.onClose();\n//     }\n//   };\n\n//   handelBackdropClick = e => {\n//     if (e.target === e.currentTarget) {\n//       this.props.onClose();\n//     }\n//   };\n\n//   render() {\n//     return createPortal(\n//       <div className=\"Modal__backdrop\" onClick={this.handelBackdropClick}>\n//         <div className=\"Modal__content\">{this.props.children}</div>\n//       </div>,\n//       modalRoot,\n//     );\n//   }\n// }\n\nModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n};\n","import React from 'react';\n\nexport default function StartPage() {\n  return (\n    <div>\n      <h2 className=\"StartPage-header\">\n        Thousands of pictures is waiting for you, just try to type something...\n      </h2>\n    </div>\n  );\n}\n","// import React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport { useState, useEffect } from 'react';\nimport Searchbar from '../Searchbar';\nimport fetchPictures from '../ApiService';\nimport ImageGallery from '../ImageGallery';\nimport OnLoadMoreBtnClick from '../Button';\nimport LoaderSpinner from '../Loader';\nimport authContext from '../Context';\nimport Modal from '../Modal';\nimport StartPage from '../StartPage';\n\nexport default function ImageFinder() {\n  const [pictureName, setPictureName] = useState('');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [isLoading, setIsLoading] = useState(false);\n  // const [error, setError] = useState(null);\n  const [gallery, setGallery] = useState([]);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [selectedImgURL, setSelectedImageUrl] = useState('');\n\n  useEffect(() => {\n    if (!pictureName) {\n      return;\n    }\n    setIsLoading(true);\n\n    const scrollHeight = document.documentElement.scrollHeight;\n\n    fetchPictures(pictureName, currentPage)\n      .then(images => {\n        setGallery(gallery => [...gallery, ...images]);\n        if (currentPage > 1) {\n          window.scrollTo({\n            top: scrollHeight - 120,\n            behavior: 'smooth',\n          });\n        }\n      })\n      .catch(error => error)\n      .finally(() => {\n        setIsLoading(false);\n      });\n  }, [pictureName, currentPage]);\n\n  const onLoadMoreBtnClick = () => {\n    setCurrentPage(currentPage => currentPage + 1);\n\n    // setTimeout(() => {\n    //   window.scrollBy({\n    //     top: document.documentElement.clientHeight - 130,\n    //     behavior: 'smooth',\n    //   });\n    // }, 600);\n  };\n\n  // const onLoadMoreBtnClick = () => {\n  //   setCurrentPage(currentPage => currentPage + 1);\n\n  //   const options = {\n  //     top: null,\n  //     behavior: 'smooth',\n  //   };\n\n  //   options.top = window.pageYOffset + document.documentElement.clientHeight;\n  //   setTimeout(() => {\n  //     window.scrollTo(options);\n  //   }, 1000);\n  // };\n  const handleFormSubmit = query => {\n    if (query !== pictureName) {\n      setGallery([]);\n      setPictureName(query);\n      setCurrentPage(1);\n    }\n  };\n\n  const handleImageClick = e => {\n    if (e.target.nodeName !== 'IMG') {\n      return;\n    }\n\n    e.preventDefault();\n    const fullImgLink = e.target.getAttribute('data-large');\n\n    setSelectedImageUrl(fullImgLink);\n    setIsModalOpen(true);\n  };\n\n  const toggleModal = () => {\n    setIsModalOpen(!isModalOpen);\n\n    if (isModalOpen) {\n      document.body.style.overflowY = 'hidden';\n    }\n  };\n\n  return (\n    <div>\n      <Searchbar onSubmit={handleFormSubmit} />\n      {gallery.length === 0 && <StartPage />}\n      <ToastContainer />\n      <div className=\"Wrapper\">{isLoading && <LoaderSpinner />}</div>\n      <authContext.Provider value={handleImageClick}>\n        {pictureName && <ImageGallery gallery={gallery} />}\n      </authContext.Provider>\n\n      {isModalOpen && (\n        <Modal onClose={toggleModal}>\n          <img src={selectedImgURL} alt=\"fullsizeImage\"></img>\n        </Modal>\n      )}\n      <div className=\"BtnWrapper\">\n        {pictureName && gallery.length > 11 && (\n          <OnLoadMoreBtnClick onClick={onLoadMoreBtnClick} />\n        )}\n      </div>\n    </div>\n  );\n}\n","// import react from 'react';\nimport Section from './Section';\nimport ImageFinder from './components/ImageFinder';\n\nexport default function App() {\n  return (\n    <Section>\n      <ImageFinder />\n    </Section>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}